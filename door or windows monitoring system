#define BLYNK_PRINT Serial

#include <ESP8266WiFi.h>
#include <BlynkSimpleEsp8266.h>
#include <SoftwareSerial.h>
#include <SimpleTimer.h>



char auth[] = "Q73mBD0LcPCXZucsHgScapeYswG4zZki";
char ssid[] = "ZONG MBB-E8231-6E63";
char pass[] = "electroniclinic";

SimpleTimer timer;

void myTimerEvent()
{
 
  Blynk.virtualWrite(V1, millis() / 1000);
  
}

int reed_s = D0; // Reed sensor

int flag = 0; 

void setup()
{
  //
  Serial.begin(9600);
  Blynk.begin(auth, ssid, pass);
 pinMode(reed_s, INPUT_PULLUP); 
  timer.setInterval(1000L,sensorvalue1); 

}

void loop()
{
  Blynk.run();
  timer.run();    

}

void sensorvalue1()
{

if((digitalRead(reed_s) == LOW) && ( flag == 0  ))
{
  Blynk.virtualWrite(V2,0 ); 
  Blynk.virtualWrite(V3,255 ); 
 Blynk.notify("Door Closed!!!"); 
  flag = 1; 
}

if((digitalRead(reed_s) == HIGH) && ( flag == 1) )
{
  Blynk.virtualWrite(V2,255 );
  Blynk.virtualWrite(V3,0 ); 
  Blynk.notify("Door Opened!!!"); 
  flag = 0; 
  
}

}
